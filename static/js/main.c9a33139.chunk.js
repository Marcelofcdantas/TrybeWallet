(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/money.b7e5e470.jpg"},34:function(e,t,a){e.exports=a(47)},39:function(e,t,a){},40:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),c=a.n(l),o=a(21),i=(a(39),a(40),a(8)),u=a(2),s=a(19),d=a(6),m=a(7),p=a(12),h=a(10),b=a(9),E=a(30),f=a.n(E);var v,y=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",isBlocked:!1},n.onChangeEmail=n.onChangeEmail.bind(Object(p.a)(n)),n.handleChange=n.handleChange.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"onChangeEmail",value:function(){var e=this.state,t=e.email,a=e.password,n=/\S+@\S+\.\S+/.test(t)&&a.length>=6;this.setState({isBlocked:n})}},{key:"handleClick",value:function(e){e.preventDefault();var t=this.state.email,a=this.props,n=a.getUser,r=a.history;n(t),r.push("/carteira")}},{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.value,r=a.id;this.setState(Object(s.a)({},r,n),(function(){return t.onChangeEmail()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,l=t.isBlocked;return r.a.createElement("div",{className:"mainLogin"},"Pocket Login",r.a.createElement("img",{src:f.a,alt:"imagem bolso"}),r.a.createElement("label",{htmlFor:"email"},"Email",r.a.createElement("br",null),r.a.createElement("input",{type:"text",id:"email",className:"email",value:a,onChange:function(t){return e.handleChange(t)},"data-testid":"email-input"})),r.a.createElement("label",{htmlFor:"password"},"Password",r.a.createElement("br",null),r.a.createElement("input",{type:"password",id:"password",onChange:function(t){return e.handleChange(t)},className:"password",value:n,"data-testid":"password-input"})),r.a.createElement("button",{type:"button",disabled:!l,onClick:function(t){return e.handleClick(t)}},"Entrar"))}}]),a}(r.a.Component),g=Object(i.b)(null,(function(e){return{getUser:function(t){return e(function(e){return{type:"LOGIN",payload:e}}(t))}}}))(y),O=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.theEmail,a=e.totalExpended;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{"data-testid":"email-field"},t),r.a.createElement("h5",{"data-testid":"total-field"},a.toFixed(2)),r.a.createElement("h5",{"data-testid":"header-currency-field"}," BRL "))}}]),a}(r.a.Component),j=Object(i.b)((function(e){return{theEmail:e.user.email,expenses:e.wallet.expenses,totalExpended:e.wallet.expenses.reduce((function(e,t){return parseFloat(t.value*t.exchangeRates[t.currency].ask)+e}),0)}}))(O),x=a(23),w=a.n(x),k=a(31),C=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={data:{},count:0},n.getData=n.getData.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.getValue)()}},{key:"getData",value:function(){var e=Object(k.a)(w.a.mark((function e(){var t,a,n,r,l,c,o,i,u,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.wallet,a=this.state.count,e.next=4,fetch("https://economia.awesomeapi.com.br/json/all");case 4:return e.next=6,e.sent.json();case 6:delete(n=e.sent).USDT,r=document.querySelector("#valor"),l=r.value,c=document.querySelector("#descricao").value,o=document.querySelector("#moeda").value,i=document.querySelector("#metodo").value,u=document.querySelector("#tag").value,this.setState({data:{id:a,value:l,description:c,currency:o,method:i,tag:u,exchangeRates:n}}),this.setState({count:a+1}),s=this.state.data,t(v=s);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.currencies,t=Object.keys(e).filter((function(e){return"USDT"!==e}));return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"valor"},"Valor:",r.a.createElement("input",{type:"text",name:"valor",id:"valor","data-testid":"value-input"})),r.a.createElement("label",{htmlFor:"descricao"},"Descri\xe7\xe3o:",r.a.createElement("input",{type:"text",name:"descricao",id:"descricao","data-testid":"description-input"})),r.a.createElement("label",{htmlFor:"moeda"},"Moeda:",r.a.createElement("select",{name:"moeda",id:"moeda","data-testid":"currency-input"},t.map((function(e){return r.a.createElement("option",{key:e},e)})))),r.a.createElement("label",{htmlFor:"metodo","data-testid":"method-input"},"M\xe9todo de pagamento:",r.a.createElement("select",{name:"metodo",id:"metodo"},r.a.createElement("option",null,"Dinheiro"),r.a.createElement("option",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",null,"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag"},"Tag:",r.a.createElement("select",{name:"tag",id:"tag","data-testid":"tag-input"},r.a.createElement("option",null,"Alimenta\xe7\xe3o"),r.a.createElement("option",null,"Lazer"),r.a.createElement("option",null,"Trabalho"),r.a.createElement("option",null,"Transporte"),r.a.createElement("option",null,"Sa\xfade"))),r.a.createElement("button",{type:"button",onClick:this.getData},"Adicionar despesa"))}}]),a}(r.a.Component),R=Object(i.b)((function(e){return{currencies:e.wallet.currencies}}),(function(e){return{getValue:function(){return e((function(e){return e({type:"REQUEST_CURRENCY"}),fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(t){return e(function(e){return{type:"RECEIVED_CURRENCY",currencies:e}}(t))}))}))},wallet:function(){return e({type:"ADD_OUTLAY",expenses:v})},getTable:function(){return e({type:"SHOW",payload:!0})}}}))(C),D=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir")))}}]),a}(r.a.Component),S=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).deletingRow=n.deletingRow.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"deletingRow",value:function(e){var t=parseFloat(e.children[6].innerText);(0,this.props.wallet)(t),e.parentNode.removeChild(e)}},{key:"render",value:function(){var e=this.props,t=e.database,a=e.wallet;return r.a.createElement("table",null,r.a.createElement(D,null),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.tag),r.a.createElement("td",null,e.method),r.a.createElement("td",null,e.value),r.a.createElement("td",null,e.exchangeRates[Object.keys(e.exchangeRates).filter((function(t){return t===e.currency}))].name.split("/")[0]),r.a.createElement("td",null,parseFloat(e.exchangeRates[Object.keys(e.exchangeRates).find((function(t){return t===e.currency}))].ask).toFixed(2)),r.a.createElement("td",null,(e.value*e.exchangeRates[Object.keys(e.exchangeRates).filter((function(t){return t===e.currency}))].ask).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(t){t.preventDefault(),a(e)}},"Excluir"),r.a.createElement("button",{type:"button","data-testid":"edit-btn"},"Editar despesa")))}))))}}]),a}(n.Component),T=Object(i.b)((function(e){return{database:e.wallet.expenses,addTable:e.table.showTable}}),(function(e){return{wallet:function(t){return e(function(e){return{type:"REMOVE_OUTLAY",payload:{expense:e}}}(t))}}}))(S),F=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"TrybeWallet",r.a.createElement(j,null),r.a.createElement(R,null),r.a.createElement(T,null))}}]),a}(r.a.Component),U=Object(i.b)((function(e){return{expenses:e.wallet.expenses}}))(F);var L=function(){return r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:g}),r.a.createElement(u.a,{path:"/carteira",component:U}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=a(13),N=a(32),V=a(33),A={email:""};var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{email:t.payload};default:return e}},_=a(26),B=a(14),W={currencies:[],expenses:[],totalExpended:0},q=function(e,t){var a=e.totalExpended,n=t.expenses.currency,r=a;return 0===r||void 0===r?(t.expenses.exchangeRates[n].ask*t.expenses.value).toFixed(2):(parseFloat(r)+parseFloat(t.expenses.exchangeRates[n].ask*t.expenses.value)).toFixed(2)};var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_CURRENCY":return console.log(t),Object(B.a)(Object(B.a)({},e),{},{currencies:t.currencies});case"ADD_OUTLAY":return Object(B.a)(Object(B.a)({},e),{},{expenses:[].concat(Object(_.a)(e.expenses),[Object(B.a)({},t.expenses)]),totalExpended:q(e,t)});case"REMOVE_OUTLAY":return Object(B.a)(Object(B.a)({},e),{},{expenses:Object(_.a)(e.expenses.filter((function(e){return e.id!==t.payload.expense.id})))});default:return e}},z={showTable:!1};var G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW":return{showTable:t.payload};default:return e}},H=Object(M.combineReducers)({user:Y,wallet:I,table:G}),J=Object(M.createStore)(H,Object(N.composeWithDevTools)(Object(M.applyMiddleware)(V.a)));c.a.render(r.a.createElement(o.a,null,r.a.createElement(i.a,{store:J},r.a.createElement(L,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.c9a33139.chunk.js.map